.\"  -*- nroff -*-
.\"  $Id: dmscntconv.1 1231 2022-04-28 08:40:50Z mueller $
.\" SPDX-License-Identifier: GPL-3.0-or-later
.\" Copyright 2015- by Walter F.J. Mueller <W.F.J.Mueller@gsi.de>
.\" 
.\" ------------------------------------------------------------------
.
.TH DMSCNTCONV 1 2015-12-29 "Retro Project" "Retro Project Manual"
.\" ------------------------------------------------------------------
.SH NAME
dmscntconv \- convert dmscnt data
.\" ------------------------------------------------------------------
.SH SYNOPSIS
.
.SY dmscntconv
.OP \-\-src=\fIseqvhd\fP
.I FILE
.
.SY dmscntconv
.B \-\-help
.YS
.
.\" ------------------------------------------------------------------
.SH DESCRIPTION
Converts the raw data generated by the w11a dmscnt unit, the embedded
micro state counter, into a human-readable format. The raw data is
usually generated by a \fBti_w11\fR Tcl command \fIrw11::sc_read\fR
and contains counter index and counter values as hex data.
\fBdmscntconv\fR will convert this into a human-readable table of state
numbers, state names and state counts for kernel and non-kernel modes.
The state names are retrieved from the \fIpdp11_sequencer.vhd\fR source file,
the path to and name of the source file can be specified with the 
\fB\-\-src\fR option.
.
.\" ------------------------------------------------------------------
.SH OPTIONS
.
.\" ----------------------------------------------
.IP "\fB\-\-srcf\fR=\fIseqvhd\fR"
name of the sequencer source file used to determine the state number to
state name mapping. Default is \fB$RETROBASE/rtl/w11a/pdp11_sequencer.vhd\fR.
This default should be OK for almost all cases.
.
.\" ----------------------------------------------
.IP "\fB\-help\fR"
print full help text and exit.
.
.\" ------------------------------------------------------------------
.SH EXAMPLES
.IP "\fBdmscntconv xxx.dat > xxx.scnt\fR" 4
reads the file \fIxxx.dat\fR and stores the output in \fIxxx.scnt\fR.
Because no \fB\-\-src\fR option is given the default sequencer file will be used.

The input raw data file is typically generated by a \fBti_w11\fR Tcl command
like

.EX
  tofile xxx.dat [rw11::sc_read]
.EE

The output might look like

.EX
#sn state              all       km      usm    all%    km%   usm%
#   sum_all           1289     1289        0  100.00 100.00   0.00
 00 s_idle            1145     1145        0   88.83  88.83   0.00
 01 s_cp_regread         9        9        0    0.70   0.70   0.00
 02 s_cp_rps             1        1        0    0.08   0.08   0.00
 03 s_cp_memr_w          0        0        0    0.00   0.00   0.00
 04 s_cp_memw_w          0        0        0    0.00   0.00   0.00
 05 s_ifetch            17       17        0    1.32   1.32   0.00
 06 s_ifetch_w          20       20        0    1.55   1.55   0.00
 07 s_idecode           20       20        0    1.55   1.55   0.00
 ...
.EE

.\" ------------------------------------------------------------------
.SH "SEE ALSO"
.BR ti_w11 (1),
.BR dmscntanal (1)

.\" ------------------------------------------------------------------
.SH AUTHOR
Walter F.J. Mueller <W.F.J.Mueller@gsi.de>
